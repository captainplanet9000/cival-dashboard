<!-- Blockchain Monitoring Section -->
<div class="row">
    <div class="col-md-12 mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <div>
                    <i class="fas fa-cubes me-2"></i>
                    Blockchain Monitoring
                </div>
                <div>
                    <div class="btn-group" role="group" id="blockchainNetworkBtns">
                        <button class="btn btn-sm btn-outline-primary active" data-network="ethereum">Ethereum</button>
                        <button class="btn btn-sm btn-outline-primary" data-network="polygon">Polygon</button>
                        <button class="btn btn-sm btn-outline-primary" data-network="arbitrum">Arbitrum</button>
                        <button class="btn btn-sm btn-outline-primary" data-network="optimism">Optimism</button>
                        <button class="btn btn-sm btn-outline-primary" data-network="base">Base</button>
                    </div>
                    <button class="btn btn-sm btn-primary ms-2" id="refreshBlockchainBtn">
                        <i class="fas fa-sync-alt me-1"></i>Refresh
                    </button>
                </div>
            </div>
            <div class="card-body">
                <!-- Network Status Panel -->
                <div class="row mb-4" id="networkStatusPanel">
                    <!-- Will be loaded from alchemy_network_status.html -->
                </div>
                
                <!-- Blockchain Content Tabs -->
                <ul class="nav nav-tabs" id="blockchainTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="transactions-tab" data-bs-toggle="tab" 
                                data-bs-target="#transactions" type="button" role="tab">
                            <i class="fas fa-exchange-alt me-1"></i>Transactions
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="nfts-tab" data-bs-toggle="tab" 
                                data-bs-target="#nfts" type="button" role="tab">
                            <i class="fas fa-images me-1"></i>NFT Gallery
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tokens-tab" data-bs-toggle="tab" 
                                data-bs-target="#tokens" type="button" role="tab">
                            <i class="fas fa-coins me-1"></i>Token Analytics
                        </button>
                    </li>
                </ul>
                
                <div class="tab-content pt-3" id="blockchainTabContent">
                    <!-- Transaction Explorer Tab -->
                    <div class="tab-pane fade show active" id="transactions" role="tabpanel">
                        <!-- Will be loaded from alchemy_transactions.html -->
                        <div id="transactionsPanel"></div>
                    </div>
                    
                    <!-- NFT Gallery Tab -->
                    <div class="tab-pane fade" id="nfts" role="tabpanel">
                        <!-- Will be loaded from alchemy_nft_gallery.html -->
                        <div id="nftGalleryPanel"></div>
                    </div>
                    
                    <!-- Token Analytics Tab -->
                    <div class="tab-pane fade" id="tokens" role="tabpanel">
                        <!-- Will be loaded from alchemy_token_analytics.html -->
                        <div id="tokenAnalyticsPanel"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Blockchain Monitoring Script -->
<script>
    // Current selected network
    let currentBlockchainNetwork = 'ethereum';
    
    // Initialize blockchain section
    function initializeBlockchainSection() {
        // Load network status on initialization
        loadNetworkComponents();
        
        // Set up event listeners
        document.getElementById('refreshBlockchainBtn').addEventListener('click', refreshBlockchainData);
        
        // Set up network switching
        document.querySelectorAll('#blockchainNetworkBtns button').forEach(button => {
            button.addEventListener('click', function() {
                // Update active button
                document.querySelectorAll('#blockchainNetworkBtns button').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                
                // Update current network
                currentBlockchainNetwork = this.getAttribute('data-network');
                
                // Refresh data
                refreshBlockchainData();
            });
        });
        
        // Set up tab change listeners
        document.querySelectorAll('#blockchainTabs button').forEach(button => {
            button.addEventListener('click', function() {
                const tabId = this.getAttribute('data-bs-target').substring(1);
                // Ensure components are loaded when tab is activated
                loadTabComponents(tabId);
            });
        });
    }
    
    // Load network components
    async function loadNetworkComponents() {
        try {
            // Load network status component
            await loadComponent('networkStatusPanel', '/alchemy_network_status.html');
            
            // Initialize network status panel
            if (window.initializeNetworkStatus) {
                window.initializeNetworkStatus();
            }
            
            // Load initial tab components
            await loadTabComponents('transactions');
        } catch (error) {
            console.error('Error loading network components:', error);
            showToast('Failed to load network components', 'error');
        }
    }
    
    // Load tab components based on selected tab
    async function loadTabComponents(tabId) {
        try {
            if (tabId === 'transactions') {
                await loadComponent('transactionsPanel', '/alchemy_transactions.html');
                if (window.initializeTransactionsPanel) {
                    window.initializeTransactionsPanel();
                }
            } else if (tabId === 'nfts') {
                await loadComponent('nftGalleryPanel', '/alchemy_nft_gallery.html');
                if (window.initializeNftGallery) {
                    window.initializeNftGallery();
                }
            } else if (tabId === 'tokens') {
                await loadComponent('tokenAnalyticsPanel', '/alchemy_token_analytics.html');
                if (window.initializeTokenAnalytics) {
                    window.initializeTokenAnalytics();
                }
            }
        } catch (error) {
            console.error(`Error loading tab components for ${tabId}:`, error);
            showToast(`Failed to load ${tabId} components`, 'error');
        }
    }
    
    // Refresh blockchain data
    function refreshBlockchainData() {
        showToast(`Refreshing ${currentBlockchainNetwork} blockchain data`, 'info');
        
        // Refresh network status
        if (window.refreshNetworkStatus) {
            window.refreshNetworkStatus(currentBlockchainNetwork);
        }
        
        // Refresh active tab
        const activeTabId = document.querySelector('#blockchainTabs button.active').getAttribute('data-bs-target').substring(1);
        if (activeTabId === 'transactions' && window.refreshTransactions) {
            window.refreshTransactions(currentBlockchainNetwork);
        } else if (activeTabId === 'nfts' && window.refreshNftGallery) {
            window.refreshNftGallery(currentBlockchainNetwork);
        } else if (activeTabId === 'tokens' && window.refreshTokenAnalytics) {
            window.refreshTokenAnalytics(currentBlockchainNetwork);
        }
    }
    
    // Initialize on load
    document.addEventListener('DOMContentLoaded', initializeBlockchainSection);
</script>
